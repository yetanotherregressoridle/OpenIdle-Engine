(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const mt=!1,gt=(e,t)=>e===t,X=Symbol("solid-proxy"),ce=Symbol("solid-track"),fe={equals:gt};let Xe=et;const K=1,de=2,We={owned:null,cleanups:null,context:null,owner:null};var _=null;let Ie=null,yt=null,$=null,M=null,F=null,xe=0;function q(e,t){const n=$,i=_,r=e.length===0,o=t===void 0?i:t,l=r?We:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=r?e:()=>e(()=>L(()=>oe(l)));_=l,$=null;try{return te(a,!0)}finally{$=n,_=i}}function W(e,t){t=t?Object.assign({},fe,t):fe;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(n.value)),qe(n,r));return[Qe.bind(n),i]}function T(e,t,n){const i=Pe(e,t,!1,K);se(i)}function Je(e,t,n){Xe=$t;const i=Pe(e,t,!1,K);i.user=!0,F?F.push(i):se(i)}function k(e,t,n){n=n?Object.assign({},fe,n):fe;const i=Pe(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,se(i),Qe.bind(i)}function vt(e){return te(e,!1)}function L(e){if($===null)return e();const t=$;$=null;try{return e()}finally{$=t}}function bt(e){Je(()=>L(e))}function ke(e){return _===null||(_.cleanups===null?_.cleanups=[e]:_.cleanups.push(e)),e}function Ae(){return $}function _t(e,t){const n=Symbol("context");return{id:n,Provider:It(n),defaultValue:e}}function pt(e){let t;return _&&_.context&&(t=_.context[e.id])!==void 0?t:e.defaultValue}function Ze(e){const t=k(e),n=k(()=>De(t()));return n.toArray=()=>{const i=n();return Array.isArray(i)?i:i!=null?[i]:[]},n}function Qe(){if(this.sources&&this.state)if(this.state===K)se(this);else{const e=M;M=null,te(()=>me(this),!1),M=e}if($){const e=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(e)):($.sources=[this],$.sourceSlots=[e]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function qe(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&te(()=>{for(let r=0;r<e.observers.length;r+=1){const o=e.observers[r],l=Ie&&Ie.running;l&&Ie.disposed.has(o),(l?!o.tState:!o.state)&&(o.pure?M.push(o):F.push(o),o.observers&&tt(o)),l||(o.state=K)}if(M.length>1e6)throw M=[],new Error},!1)),t}function se(e){if(!e.fn)return;oe(e);const t=xe;xt(e,e.value,t)}function xt(e,t,n){let i;const r=_,o=$;$=_=e;try{i=e.fn(t)}catch(l){return e.pure&&(e.state=K,e.owned&&e.owned.forEach(oe),e.owned=null),e.updatedAt=n+1,nt(l)}finally{$=o,_=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?qe(e,i):e.value=i,e.updatedAt=n)}function Pe(e,t,n,i=K,r){const o={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:_,context:_?_.context:null,pure:n};return _===null||_!==We&&(_.owned?_.owned.push(o):_.owned=[o]),o}function he(e){if(e.state===0)return;if(e.state===de)return me(e);if(e.suspense&&L(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<xe);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===K)se(e);else if(e.state===de){const i=M;M=null,te(()=>me(e,t[0]),!1),M=i}}function te(e,t){if(M)return e();let n=!1;t||(M=[]),F?n=!0:F=[],xe++;try{const i=e();return Et(n),i}catch(i){n||(F=null),M=null,nt(i)}}function Et(e){if(M&&(et(M),M=null),e)return;const t=F;F=null,t.length&&te(()=>Xe(t),!1)}function et(e){for(let t=0;t<e.length;t++)he(e[t])}function $t(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:he(i)}for(t=0;t<n;t++)he(e[t])}function me(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const r=i.state;r===K?i!==t&&(!i.updatedAt||i.updatedAt<xe)&&he(i):r===de&&me(i,t)}}}function tt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=de,n.pure?M.push(n):F.push(n),n.observers&&tt(n))}}function oe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const o=r.pop(),l=n.observerSlots.pop();i<r.length&&(o.sourceSlots[l]=i,r[i]=o,n.observerSlots[i]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)oe(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)oe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function wt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function nt(e,t=_){throw wt(e)}function De(e){if(typeof e=="function"&&!e.length)return De(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const i=De(e[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function It(e,t){return function(i){let r;return T(()=>r=L(()=>(_.context={..._.context,[e]:i.value},Ze(()=>i.children))),void 0),r}}const Te=Symbol("fallback");function ge(e){for(let t=0;t<e.length;t++)e[t]()}function St(e,t,n={}){let i=[],r=[],o=[],l=0,a=t.length>1?[]:null;return ke(()=>ge(o)),()=>{let s=e()||[],u=s.length,f,c;return s[ce],L(()=>{let h,b,x,S,D,E,A,N,R;if(u===0)l!==0&&(ge(o),o=[],i=[],r=[],l=0,a&&(a=[])),n.fallback&&(i=[Te],r[0]=q(d=>(o[0]=d,n.fallback())),l=1);else if(l===0){for(r=new Array(u),c=0;c<u;c++)i[c]=s[c],r[c]=q(y);l=u}else{for(x=new Array(u),S=new Array(u),a&&(D=new Array(u)),E=0,A=Math.min(l,u);E<A&&i[E]===s[E];E++);for(A=l-1,N=u-1;A>=E&&N>=E&&i[A]===s[N];A--,N--)x[N]=r[A],S[N]=o[A],a&&(D[N]=a[A]);for(h=new Map,b=new Array(N+1),c=N;c>=E;c--)R=s[c],f=h.get(R),b[c]=f===void 0?-1:f,h.set(R,c);for(f=E;f<=A;f++)R=i[f],c=h.get(R),c!==void 0&&c!==-1?(x[c]=r[f],S[c]=o[f],a&&(D[c]=a[f]),c=b[c],h.set(R,c)):o[f]();for(c=E;c<u;c++)c in x?(r[c]=x[c],o[c]=S[c],a&&(a[c]=D[c],a[c](c))):r[c]=q(y);r=r.slice(0,l=u),i=s.slice(0)}return r});function y(h){if(o[c]=h,a){const[b,x]=W(c);return a[c]=x,t(s[c],b)}return t(s[c])}}}function At(e,t,n={}){let i=[],r=[],o=[],l=[],a=0,s;return ke(()=>ge(o)),()=>{const u=e()||[],f=u.length;return u[ce],L(()=>{if(f===0)return a!==0&&(ge(o),o=[],i=[],r=[],a=0,l=[]),n.fallback&&(i=[Te],r[0]=q(y=>(o[0]=y,n.fallback())),a=1),r;for(i[0]===Te&&(o[0](),o=[],i=[],r=[],a=0),s=0;s<f;s++)s<i.length&&i[s]!==u[s]?l[s](()=>u[s]):s>=i.length&&(r[s]=q(c));for(;s<i.length;s++)o[s]();return a=l.length=o.length=f,i=u.slice(0),r=r.slice(0,a)});function c(y){o[s]=y;const[h,b]=W(u[s]);return l[s]=b,t(h,s)}}}function m(e,t){return L(()=>e(t||{}))}const it=e=>`Stale read from <${e}>.`;function Me(e){const t="fallback"in e&&{fallback:()=>e.fallback};return k(St(()=>e.each,e.children,t||void 0))}function Ee(e){const t="fallback"in e&&{fallback:()=>e.fallback};return k(At(()=>e.each,e.children,t||void 0))}function C(e){const t=e.keyed,n=k(()=>e.when,void 0,void 0),i=t?n:k(n,void 0,{equals:(r,o)=>!r==!o});return k(()=>{const r=i();if(r){const o=e.children;return typeof o=="function"&&o.length>0?L(()=>o(t?r:()=>{if(!L(i))throw it("Show");return n()})):o}return e.fallback},void 0,void 0)}function Dt(e){const t=Ze(()=>e.children),n=k(()=>{const i=t(),r=Array.isArray(i)?i:[i];let o=()=>{};for(let l=0;l<r.length;l++){const a=l,s=r[l],u=o,f=k(()=>u()?void 0:s.when,void 0,void 0),c=s.keyed?f:k(f,void 0,{equals:(y,h)=>!y==!h});o=()=>u()||(c()?[a,f,s]:void 0)}return o});return k(()=>{const i=n()();if(!i)return e.fallback;const[r,o,l]=i,a=l.children;return typeof a=="function"&&a.length>0?L(()=>a(l.keyed?o():()=>{if(L(n)()?.[0]!==r)throw it("Match");return o()})):a},void 0,void 0)}function ue(e){return e}const z=e=>k(()=>e());function Tt(e,t,n){let i=n.length,r=t.length,o=i,l=0,a=0,s=t[r-1].nextSibling,u=null;for(;l<r||a<o;){if(t[l]===n[a]){l++,a++;continue}for(;t[r-1]===n[o-1];)r--,o--;if(r===l){const f=o<i?a?n[a-1].nextSibling:n[o-a]:s;for(;a<o;)e.insertBefore(n[a++],f)}else if(o===a)for(;l<r;)(!u||!u.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[o-1]&&n[a]===t[r-1]){const f=t[--r].nextSibling;e.insertBefore(n[a++],t[l++].nextSibling),e.insertBefore(n[--o],f),t[r]=n[o]}else{if(!u){u=new Map;let c=a;for(;c<o;)u.set(n[c],c++)}const f=u.get(t[l]);if(f!=null)if(a<f&&f<o){let c=l,y=1,h;for(;++c<r&&c<o&&!((h=u.get(t[c]))==null||h!==f+y);)y++;if(y>f-a){const b=t[l];for(;a<f;)e.insertBefore(n[a++],b)}else e.replaceChild(n[a++],t[l++])}else l++;else t[l++].remove()}}}const He="_$DX_DELEGATE";function Mt(e,t,n,i={}){let r;return q(o=>{r=o,t===document?e():g(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{r(),t.textContent=""}}function p(e,t,n,i){let r;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},l=()=>(r||(r=o())).cloneNode(!0);return l.cloneNode=l,l}function $e(e,t=window.document){const n=t[He]||(t[He]=new Set);for(let i=0,r=e.length;i<r;i++){const o=e[i];n.has(o)||(n.add(o),t.addEventListener(o,kt))}}function v(e,t){t==null?e.removeAttribute("class"):e.className=t}function Ot(e,t,n,i){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function Ct(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function g(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return ye(e,t,i,n);T(r=>ye(e,t(),r,n),i)}function kt(e){let t=e.target;const n=`$$${e.type}`,i=e.target,r=e.currentTarget,o=s=>Object.defineProperty(e,"target",{configurable:!0,value:s}),l=()=>{const s=t[n];if(s&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?s.call(t,u,e):s.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},a=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const s=e.composedPath();o(s[0]);for(let u=0;u<s.length-2&&(t=s[u],!!l());u++){if(t._$host){t=t._$host,a();break}if(t.parentNode===r)break}}else a();o(i)}function ye(e,t,n,i,r){for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,l=i!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===n))return n;if(l){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=J(e,n,i,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean")n=J(e,n,i);else{if(o==="function")return T(()=>{let a=t();for(;typeof a=="function";)a=a();n=ye(e,a,n,i)}),()=>n;if(Array.isArray(t)){const a=[],s=n&&Array.isArray(n);if(Oe(a,t,n,r))return T(()=>n=ye(e,a,n,i,!0)),()=>n;if(a.length===0){if(n=J(e,n,i),l)return n}else s?n.length===0?ze(e,a,i):Tt(e,n,a):(n&&J(e),ze(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=J(e,n,i,t);J(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Oe(e,t,n,i){let r=!1;for(let o=0,l=t.length;o<l;o++){let a=t[o],s=n&&n[e.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))r=Oe(e,a,s)||r;else if(u==="function")if(i){for(;typeof a=="function";)a=a();r=Oe(e,Array.isArray(a)?a:[a],Array.isArray(s)?s:[s])||r}else e.push(a),r=!0;else{const f=String(a);s&&s.nodeType===3&&s.data===f?e.push(s):e.push(document.createTextNode(f))}}return r}function ze(e,t,n=null){for(let i=0,r=t.length;i<r;i++)e.insertBefore(t[i],n)}function J(e,t,n,i){if(n===void 0)return e.textContent="";const r=i||document.createTextNode("");if(t.length){let o=!1;for(let l=t.length-1;l>=0;l--){const a=t[l];if(r!==a){const s=a.parentNode===e;!o&&!l?s?e.replaceChild(r,a):e.insertBefore(r,n):s&&a.remove()}else o=!0}}else e.insertBefore(r,n);return[r]}const Pt="_App_4fbln_1",Nt="_main_container_4fbln_13",Lt="_tab_content_4fbln_28",jt="_logs_4fbln_39",Ut="_stats_4fbln_52",Rt="_tab_nav_4fbln_66",Vt="_tab_button_4fbln_78",Gt="_tab_active_4fbln_97",Ft="_header_4fbln_113",O={App:Pt,main_container:Nt,tab_content:Lt,logs:jt,stats:Ut,tab_nav:Rt,tab_button:Vt,tab_active:Gt,header:Ft},Ce=Symbol("store-raw"),ee=Symbol("store-node"),G=Symbol("store-has"),rt=Symbol("store-self");function ot(e){let t=e[X];if(!t&&(Object.defineProperty(e,X,{value:t=new Proxy(e,Ht)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let r=0,o=n.length;r<o;r++){const l=n[r];i[l].get&&Object.defineProperty(e,l,{enumerable:i[l].enumerable,get:i[l].get.bind(t)})}}return t}function ve(e){let t;return e!=null&&typeof e=="object"&&(e[X]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ae(e,t=new Set){let n,i,r,o;if(n=e!=null&&e[Ce])return n;if(!ve(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let l=0,a=e.length;l<a;l++)r=e[l],(i=ae(r,t))!==r&&(e[l]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const l=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let s=0,u=l.length;s<u;s++)o=l[s],!a[o].get&&(r=e[o],(i=ae(r,t))!==r&&(e[o]=i))}return e}function be(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function le(e,t,n){if(e[t])return e[t];const[i,r]=W(n,{equals:!1,internal:!0});return i.$=r,e[t]=i}function Bt(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===X||t===ee||(delete n.value,delete n.writable,n.get=()=>e[X][t]),n}function at(e){Ae()&&le(be(e,ee),rt)()}function Yt(e){return at(e),Reflect.ownKeys(e)}const Ht={get(e,t,n){if(t===Ce)return e;if(t===X)return n;if(t===ce)return at(e),n;const i=be(e,ee),r=i[t];let o=r?r():e[t];if(t===ee||t===G||t==="__proto__")return o;if(!r){const l=Object.getOwnPropertyDescriptor(e,t);Ae()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(l&&l.get)&&(o=le(i,t,o)())}return ve(o)?ot(o):o},has(e,t){return t===Ce||t===X||t===ce||t===ee||t===G||t==="__proto__"?!0:(Ae()&&le(be(e,G),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Yt,getOwnPropertyDescriptor:Bt};function _e(e,t,n,i=!1){if(!i&&e[t]===n)return;const r=e[t],o=e.length;n===void 0?(delete e[t],e[G]&&e[G][t]&&r!==void 0&&e[G][t].$()):(e[t]=n,e[G]&&e[G][t]&&r===void 0&&e[G][t].$());let l=be(e,ee),a;if((a=le(l,t,r))&&a.$(()=>n),Array.isArray(e)&&e.length!==o){for(let s=e.length;s<o;s++)(a=l[s])&&a.$();(a=le(l,"length",o))&&a.$(e.length)}(a=l[rt])&&a.$()}function lt(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const r=n[i];_e(e,r,t[r])}}function zt(e,t){if(typeof t=="function"&&(t=t(e)),t=ae(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const r=t[n];e[n]!==r&&_e(e,n,r)}_e(e,"length",i)}else lt(e,t)}function re(e,t,n=[]){let i,r=e;if(t.length>1){i=t.shift();const l=typeof i,a=Array.isArray(e);if(Array.isArray(i)){for(let s=0;s<i.length;s++)re(e,[i[s]].concat(t),n);return}else if(a&&l==="function"){for(let s=0;s<e.length;s++)i(e[s],s)&&re(e,[s].concat(t),n);return}else if(a&&l==="object"){const{from:s=0,to:u=e.length-1,by:f=1}=i;for(let c=s;c<=u;c+=f)re(e,[c].concat(t),n);return}else if(t.length>1){re(e[i],t,[i].concat(n));return}r=e[i],n=[i].concat(n)}let o=t[0];typeof o=="function"&&(o=o(r,n),o===r)||i===void 0&&o==null||(o=ae(o),i===void 0||ve(r)&&ve(o)&&!Array.isArray(o)?lt(r,o):_e(e,i,o))}function Kt(...[e,t]){const n=ae(e||{}),i=Array.isArray(n),r=ot(n);function o(...l){vt(()=>{i&&l.length===1?zt(n,l[0]):re(n,l)})}return[r,o]}const I="player",Xt="actions",Wt=[{id:"days",name:"Days",type:"basic",category:"loop",baseValue:5,baseMax:10,description:"Days",wholeNumbers:!0,resetOnLoop:!0},{id:"regressions",name:"Regressions",type:"basic",category:"loop",baseValue:0,baseMax:-1,description:"Number of times you have regressed.",wholeNumbers:!0,hidden:!0,resetOnLoop:!1}],Jt=Object.freeze(Object.defineProperty({__proto__:null,RESOURCES:Wt},Symbol.toStringTag,{value:"Module"})),Zt=[{id:"first",name:"Defend",type:"combat",category:"loop",order:"random",enemies:["slime"],numberOfEnemies:1,completionMessage:"You have defended",globalCompletionEffects:[{type:"increase_value",itemID:"mana_shard_0",amount:1},{type:"increase_value",resourceID:"days",amount:1}],unitCompletionEffects:[],failureMessage:"You have failed to defend",globalFailureEffects:[{type:"increase_value",resourceID:"days",amount:1},{type:"enable_meta_progression",metaProgressionID:"lost_first_battle"}],unitFailureEffects:[]}],Qt=Object.freeze(Object.defineProperty({__proto__:null,ENCOUNTERS:Zt},Symbol.toStringTag,{value:"Module"})),qt=[{id:"slime",name:"Slime",health:5,mana:1,description:"Oozing around",skills:["mana_attack"],completionEffects:[{type:"increase_value",itemID:"mana_shard_0",amount:1,chance:.1}]}],en=Object.freeze(Object.defineProperty({__proto__:null,ENEMIES:qt},Symbol.toStringTag,{value:"Module"})),tn=[{id:"avoid",name:"Avoid Danger",category:"officebuilding",description:"Survive to the next day by avoiding danger.",flavorText:"Knowing the ins and outs of the office building, you decide to hide from the monsters until help arrives.",globalEffects:[{type:"increase_value",resourceID:"days",amount:1}],unitEffects:[],prerequisites:[{resourceID:"regressions",maxValue:0},{resourceID:"days",valueLessThanMax:!0}]},{id:"battle",name:"Battle",category:"officebuilding",description:"Fight your way out of the office building.",flavorText:"More monsters have come through the dungeon gate and you can no longer find a safe place to hide. The only way out is past the monsters.",globalEffects:[{type:"start_encounter",encounterID:"first"}],unitEffects:[],maxExecutions:1,prerequisites:[{resourceID:"regressions",maxValue:0},{resourceID:"days",valueEqualToMax:!0}]},{id:"awaken",name:"Awaken",category:"officebuilding",description:"Awaken your latent abilities.",flavorText:"There are stories of people who have awakened their abilities in times of crisis. With the clarity of imminent death, you focus your mind and reach for the sleeping power within you.",globalEffects:[],unitEffects:[{type:"increase_max",target:"mainCharacter",stat:"mana",amount:1},{type:"increase_value",target:"mainCharacter",stat:"mana",amount:1}],maxExecutions:1,prerequisites:[{resourceID:"regressions",maxValue:0},{metaProgressionID:"lost_first_battle"}]},{id:"loop",name:"Loop",category:"officebuilding",description:"Regress to the past.",flavorText:"This unknown power allows you to regress to the past. You can use this power to try again.",globalEffects:[{type:"loop"}],unitEffects:[],prerequisites:[{resourceID:"regressions",maxValue:0},{unit:"mainCharacter",unitStat:"mana",minMax:1}]}],nn=Object.freeze(Object.defineProperty({__proto__:null,ACTIONS:tn},Symbol.toStringTag,{value:"Module"})),rn=[{id:"mana_shard_0",name:"Mana Shard 0",description:"A shard of very low quality mana."},{id:"mana_shard_1",name:"Mana Shard 1",description:"A shard of low quality mana."},{id:"mana_shard_2",name:"Mana Shard 2",description:"A shard of medium quality mana."},{id:"mana_shard_3",name:"Mana Shard 3",description:"A shard of high quality mana."},{id:"mana_shard_4",name:"Mana Shard 4",description:"A shard of very high quality mana."},{id:"mana_shard_5",name:"Mana Shard 5",description:"A shard of superior quality mana."},{id:"mana_shard_6",name:"Mana Shard 6",description:"A shard of pure mana."}],on=Object.freeze(Object.defineProperty({__proto__:null,ITEMS:rn},Symbol.toStringTag,{value:"Module"})),an=[{id:"basic_attack",name:"Basic Attack",type:"active",delay:2,globalCosts:[],unitCosts:[],globalEffects:[],unitEffects:[{type:"damage",amount:.1,target:"enemy",stat:"health"}]},{id:"mana_attack",name:"Mana-Enhanced Attack",type:"active",delay:2,globalCosts:[],unitCosts:[{target:"self",stat:"mana",amount:.1}],globalEffects:[],unitEffects:[{type:"damage",amount:1,target:"enemy",stat:"health"}]}],ln=Object.freeze(Object.defineProperty({__proto__:null,SKILLS:an},Symbol.toStringTag,{value:"Module"})),sn=[],un=Object.freeze(Object.defineProperty({__proto__:null,PROGRESSION:sn},Symbol.toStringTag,{value:"Module"})),cn=[{id:"lost_first_battle"}],fn=Object.freeze(Object.defineProperty({__proto__:null,METAPROGRESSION:cn},Symbol.toStringTag,{value:"Module"})),dn=[],Ne=[],st=[],ut=[],Le=[],hn=[],ct=[],mn=[],gn=[],yn=[Jt,Qt,en,nn,on,ln,un,fn];yn.forEach(e=>{e.CATEGORIES&&dn.push(...e.CATEGORIES),e.RESOURCES&&Ne.push(...e.RESOURCES),e.ENCOUNTERS&&st.push(...e.ENCOUNTERS),e.ENEMIES&&ut.push(...e.ENEMIES),e.ACTIONS&&Le.push(...e.ACTIONS),e.ITEMS&&hn.push(...e.ITEMS),e.SKILLS&&ct.push(...e.SKILLS),e.PROGRESSION&&mn.push(...e.PROGRESSION),e.META_PROGRESSION&&gn.push(...e.META_PROGRESSION)});const vn=Ne,U=Ne.reduce((e,t)=>(e[t.id]=t,e),{}),we=st.reduce((e,t)=>(e[t.id]=t,e),{}),ft=ut.reduce((e,t)=>(e[t.id]=t,e),{}),dt=Le,Q=Le.reduce((e,t)=>(e[t.id]=t,e),{}),H=ct.reduce((e,t)=>(e[t.id]=t,e),{}),bn={count:0,resources:{},actions:{},items:{},party:{},activeParty:[],encounter:null,logs:[],theme:"system",tabs:["actions","encounter","inventory","config"],activeTab:Xt,progression:{},metaProgression:{}};function V(e,t,n){return Math.min(Math.max(e,t),n)}function _n(){const[e,t]=Kt(bn),n={increment:()=>t("count",i=>i+1),decrement:()=>t("count",i=>i-1),initialize:i=>{t("party",I,{id:I,name:"Player",health:{value:5,max:10},mana:{value:0,max:0},skills:["basic_attack"]}),t("activeParty",[I]),vn.forEach(r=>{t("resources",r.id,{visible:i.computeVisibility(r.id),value:r.baseValue,max:r.baseMax})}),dt.forEach(r=>{t("actions",r.id,{visible:i.computeVisibility(r.id),executions:0})})},computeVisibility:i=>{const r=pn(e,i);return i in U&&t("resources",i,{visible:r}),i in Q&&t("actions",i,{visible:r}),r},computeEnabled:i=>pe(e,i),applyGlobalEffects:function(i){i.forEach(r=>{n.applyGlobalEffect(r)})},applyGlobalEffect:function(i){xn(e,t,n,i)},applyUnitEffects:function(i){i.forEach(r=>{n.applyUnitEffect(r)})},applyUnitEffect:function(i){En(e,t,n,i)},doAction:i=>{$n(e,t,n,i)},addLog:i=>{t("logs",r=>[...r,i])},runEncounter:i=>{Dn(e,t,n,i)},setTheme:i=>{t("theme",i)},setActiveTab:i=>{t("activeTab",i)},setProgression:i=>{t("progression",i,!0)},setMetaProgression:i=>{t("metaProgression",i,!0)}};return[e,n]}function pn(e,t){if(t in U){let n=!1;return t in e.resources&&(n=e.resources[t].visible&&!U[t].hidden&&e.resources[t].max!==0),n||pe(e,t)}if(t in Q){let n=!1;return t in e.actions&&(n=e.actions[t].visible),n||pe(e,t)}return!1}function pe(e,t){let n=[];t in Q&&(n=Q[t].prerequisites);let i=!1;return!n||n.length===0?i=!0:i=n.every(r=>{if(r.resourceID){const o=e.resources[r.resourceID];if(!o||r.minValue!==void 0&&o.value<r.minValue||r.maxValue!==void 0&&o.value>r.maxValue||r.minMax!==void 0&&o.max!==void 0&&o.max<r.minMax||r.maxMax!==void 0&&o.max!==void 0&&o.max>r.maxMax||r.valueLessThanMax&&o.max!==void 0&&o.value>=o.max||r.valueGreaterThanZero&&o.value<=0||r.valueEqualToMax&&o.max!==void 0&&o.value!==o.max)return!1}if(r.actionID){const o=e.actions[r.actionID];if(!o||(console.log("act state: visible ="+o.visible+", executions = "+o.executions),r.actionMinExecutions!==void 0&&o.executions<r.actionMinExecutions)||r.actionMaxExecutions!==void 0&&o.executions>r.actionMaxExecutions)return!1}if(r.progressionID&&!e.progression[r.progressionID]||r.metaProgressionID&&!e.metaProgression[r.metaProgressionID])return!1;if(r.unit&&r.unitStat&&r.unit==="mainCharacter"){const o=e.party[I];if(!o||r.unitStat==="health"&&(r.minValue!==void 0&&o.health.value<r.minValue||r.maxValue!==void 0&&o.health.value>r.maxValue||r.minMax!==void 0&&o.health.max<r.minMax||r.maxMax!==void 0&&o.health.max>r.maxMax)||r.unitStat==="mana"&&(r.minValue!==void 0&&o.mana.value<r.minValue||r.maxValue!==void 0&&o.mana.value>r.maxValue||r.minMax!==void 0&&o.mana.max<r.minMax||r.maxMax!==void 0&&o.mana.max>r.maxMax))return!1}return!0}),t in e.actions&&Q[t].maxExecutions&&e.actions[t].executions>=Q[t].maxExecutions&&(i=!1),i}function xn(e,t,n,i){switch(i.type){case"increase_value":if(console.log("increase_value"),i.resourceID){if(n.addLog("Increase value "+i.resourceID+" "+i.amount),i.chance!==void 0&&Math.random()>i.chance)return;t("resources",i.resourceID,"value",a=>{let s=a+(i.amount||0),u=e.resources[i.resourceID||""]?.max||0;return u!==-1&&(s=V(s,0,u)),s})}if(i.itemID){if(n.addLog("Increase value "+i.itemID+" "+i.amount),i.chance!==void 0&&Math.random()>i.chance)return;t("items",i.itemID,a=>{const s=a||{amount:0},u=s.amount+(i.amount||0);return{...s,amount:u}})}break;case"increase_max":if(console.log("increase_max"),i.resourceID){if(n.addLog("Increase max "+i.resourceID+" "+i.amount),e.resources[i.resourceID||""]?.max===-1){console.log("Cannot increase max for resource "+i.resourceID+" because it has a max of -1.");return}t("resources",i.resourceID,a=>{const s=a||{value:0,max:0},u=s.max+(i.amount||0),f=V(s.value,0,u);return{...s,max:u,value:f}})}break;case"start_encounter":if(e.party[I].health.value<=0){n.addLog("Cannot start encounter with 0 health.");return}n.addLog("Start encounter");const r=i.encounterID;if(!r){console.log("no encounter id found");return}const o=we[r];if(console.log(o),!o){console.log("no encounter found");return}let l={encounterID:r,currentEnemyIndex:0,allies:e.activeParty.reduce((a,s)=>(a[s]={delay:0},a),{}),enemies:[]};console.log(l),t("encounter",l),n.setActiveTab("encounter");break;case"enable_progression":if(!i.progressionID){console.log("no progression id found");return}n.setProgression(i.progressionID);break;case"enable_meta_progression":if(!i.metaProgressionID){console.log("no meta progression id found");return}n.setMetaProgression(i.metaProgressionID);break;case"loop":console.log("looping");for(const a of Object.keys(e.resources))t("resources",a,"value",0);for(const a of Object.keys(e.actions))t("actions",a,"executions",0);t("resources","regressions","value",a=>a+1),t("progression",{});break}}function En(e,t,n,i){const r=i.config,o=i.options;console.log("applyUnitEffectConfig: "+JSON.stringify(r)),console.log("applyUnitEffectOptions: "+JSON.stringify(o)),r.type==="increase_value"&&r.target==="mainCharacter"&&(r.stat==="health"&&t("party",I,"health",l=>{const a=l||{value:0,max:0},s=V(a.value+(r.amount||0),0,a.max);return{...a,value:s}}),r.stat==="mana"&&t("party",I,"mana",l=>{const a=l||{value:0,max:0},s=V(a.value+(r.amount||0),0,a.max);return{...a,value:s}})),r.type==="increase_max"&&r.target==="mainCharacter"&&(r.stat==="health"&&t("party",I,"health",l=>{const a=l||{value:0,max:0},s=a.max+(r.amount||0),u=V(a.value,0,s);return{...a,max:s,value:u}}),r.stat==="mana"&&t("party",I,"mana",l=>{const a=l||{value:0,max:0},s=a.max+(r.amount||0),u=V(a.value,0,s);return{...a,max:s,value:u}})),r.type==="damage"&&(r.target==="mainCharacter"&&t("party",I,"health","value",l=>V(l-(r.amount||0),0,e.party[I].health.max)),o.targetAllyPartyUnitIDs&&o.targetAllyPartyUnitIDs.forEach(l=>{t("party",l,"health","value",a=>{const s=e.party[l];return s?V(a-(r.amount||0),0,s.health.max):a})}),o.targetEnemyPartyUnitIDs&&o.targetEnemyPartyUnitIDs.forEach(l=>{t("encounter","enemies",l,"health","value",a=>{const s=e.encounter?.enemies[l];return s?V(a-(r.amount||0),0,s.health.max):a})}))}function $n(e,t,n,i){if(e.encounter!==null){n.addLog("Cannot perform another action while in an encounter.");return}if(e.actions[i.id]||t("actions",i.id,{executions:0}),i.maxExecutions&&e.actions[i.id].executions>=i.maxExecutions){console.log("Action already executed max times");return}if(!pe(e,i.id)){console.log("Prerequisites not met");return}t("actions",i.id,r=>({...r,executions:r.executions+1})),n.applyGlobalEffects(i.globalEffects),n.applyUnitEffects(i.unitEffects.map(r=>({config:r,options:{}})))}function wn(e){if(e.encounter===null)return!1;const t=we[e.encounter.encounterID];return t?e.encounter.currentEnemyIndex>=t.numberOfEnemies:!1}function In(e){return e.encounter===null?!1:e.activeParty.every(t=>e.party[t].health.value<=0)}function Sn(e,t,n){if(e.encounter===null||e.encounter.enemies.length>0)return;const i=we[e.encounter.encounterID];if(!i||e.encounter.currentEnemyIndex>=i.numberOfEnemies)return;let r="";i.order=="random"?r=i.enemies[Math.floor(Math.random()*i.enemies.length)]:i.order=="sequential"&&(r=i.enemies[e.encounter.currentEnemyIndex]);const o=ft[r],l={enemyID:o.id,health:{value:o.health,max:o.health},mana:{value:o.mana,max:o.mana},delay:0};t("encounter","enemies",[l]),i.order=="random"&&n.addLog("Enemy spawned: "+o.name)}function An(e,t){e.encounter===null||e.encounter.enemies.length===0||e.encounter.enemies[0].health.value<=0&&(t("encounter","enemies",[]),t("encounter","currentEnemyIndex",n=>n+1))}function Dn(e,t,n,i){if(e.encounter===null||(Sn(e,t,n),e.encounter.enemies.length===0))return;Object.entries(e.encounter.allies).forEach(([o,l])=>{if(l.skillID===void 0){const a=e.party[o];if(!a)return;const s=a.skills[Math.floor(Math.random()*a.skills.length)];t("encounter","allies",o,"skillID",s)}}),e.encounter.enemies.forEach((o,l)=>{if(o.skillID===void 0){const a=ft[o.enemyID],s=a.skills[Math.floor(Math.random()*a.skills.length)];t("encounter","enemies",l,"skillID",s)}}),Object.keys(e.encounter.allies).forEach(o=>{t("encounter","allies",o,"delay",l=>(l||0)+i)}),e.encounter.enemies.forEach((o,l)=>{t("encounter","enemies",l,"delay",a=>(a||0)+i)}),Object.entries(e.encounter.allies).forEach(([o,l])=>{const a=l.skillID;if(!a)return;const s=H[a];l.delay>=s.delay&&(s.unitEffects.forEach(u=>{let f={allyPartyUnitID:o};if(u.target=="enemy"){const c=Math.floor(Math.random()*e.encounter.enemies.length);f.targetEnemyPartyUnitIDs=[c]}if(u.target=="enemies"&&(f.targetEnemyPartyUnitIDs=e.encounter.enemies.map((c,y)=>y)),u.target=="ally"){const c=Object.keys(e.encounter.allies),y=c[Math.floor(Math.random()*c.length)];f.targetAllyPartyUnitIDs=[y]}u.target=="allies"&&(f.targetAllyPartyUnitIDs=Object.keys(e.encounter.allies)),u.target=="all"&&(f.targetAllyPartyUnitIDs=Object.keys(e.encounter.allies),f.targetEnemyPartyUnitIDs=e.encounter.enemies.map((c,y)=>y)),n.applyUnitEffect({config:u,options:f})}),t("encounter","allies",o,"delay",u=>(u||0)-s.delay),t("encounter","allies",o,"skillID",void 0),An(e,t))}),e.encounter.enemies.forEach((o,l)=>{const a=o.skillID;if(!a)return;const s=H[a];o.delay>=s.delay&&(s.unitEffects.forEach(u=>{let f={enemyPartyUnitID:l};if(u.target=="ally"){const c=Math.floor(Math.random()*e.encounter.enemies.length);f.targetEnemyPartyUnitIDs=[c]}if(u.target=="allies"&&(f.targetEnemyPartyUnitIDs=e.encounter.enemies.map((c,y)=>y)),u.target=="enemy"){const c=Object.keys(e.encounter.allies),y=c[Math.floor(Math.random()*c.length)];f.targetAllyPartyUnitIDs=[y]}u.target=="enemies"&&(f.targetAllyPartyUnitIDs=Object.keys(e.encounter.allies)),u.target=="all"&&(f.targetAllyPartyUnitIDs=Object.keys(e.encounter.allies),f.targetEnemyPartyUnitIDs=e.encounter.enemies.map((c,y)=>y)),n.applyUnitEffect({config:u,options:f})}),t("encounter","enemies",l,"delay",u=>(u||0)-s.delay),t("encounter","enemies",l,"skillID",void 0))});const r=we[e.encounter.encounterID];if(wn(e)){n.applyGlobalEffects(r.globalCompletionEffects),n.applyUnitEffects(r.unitCompletionEffects.map(o=>({config:o,options:{}}))),r.globalCompletionEffects.some(o=>o.type==="start_encounter")||t("encounter",null),n.addLog("Encounter completed");return}if(In(e)){n.applyGlobalEffects(r.globalFailureEffects),n.applyUnitEffects(r.unitFailureEffects.map(o=>({config:o,options:{}}))),t("encounter",null),n.addLog("Encounter failed");return}}const ht=_t(void 0);function Tn(e){const t=_n();return m(ht.Provider,{value:t,get children(){return e.children}})}function ne(){const e=pt(ht);if(!e)throw new Error("useState must be used within a StateProvider");return e}function w(e,t){return e==null?"0.00":t?e.toFixed(0):e.toFixed(2)}const Mn="_actionContainer_uq1yh_1",On="_action_uq1yh_1",Cn="_actionContent_uq1yh_35",kn="_actionHeader_uq1yh_39",Pn="_toggleButton_uq1yh_46",Nn="_expandedDetails_uq1yh_65",Ln="_flavorText_uq1yh_84",jn="_prerequisites_uq1yh_91",B={actionContainer:Mn,action:On,actionContent:Cn,actionHeader:kn,toggleButton:Pn,expandedDetails:Nn,flavorText:Ln,prerequisites:jn};var Un=p("<div><b>Actions"),Rn=p('<button aria-label="Toggle details"type=button>'),Vn=p("<p>"),Gn=p("<div><strong>Prerequisites:</strong><ul>"),Fn=p("<div>"),Bn=p("<div><button><div><div><span></span></div><hr>"),Yn=p("<li>");const Hn=()=>(()=>{var e=Un();return e.firstChild,g(e,m(Ee,{each:dt,children:t=>m(zn,{item:t})}),null),e})(),zn=e=>{const[t,n]=ne(),i=e.item,[r,o]=W(!1),l=s=>{const u=[];return s.resourceID&&(u.push(`Resource: ${s.resourceID}`),s.minValue!==void 0&&u.push(`min value: ${s.minValue}`),s.maxValue!==void 0&&u.push(`max value: ${s.maxValue}`),s.minMax!==void 0&&u.push(`min max: ${s.minMax}`),s.maxMax!==void 0&&u.push(`max max: ${s.maxMax}`),s.valueGreaterThanZero&&u.push("value > 0"),s.valueLessThanMax&&u.push("value < max"),s.valueEqualToMax&&u.push("value = max")),s.actionID&&(u.push(`Action: ${s.actionID}`),s.actionMinExecutions!==void 0&&u.push(`min executions: ${s.actionMinExecutions}`),s.actionMaxExecutions!==void 0&&u.push(`max executions: ${s.actionMaxExecutions}`)),s.unit&&(u.push(`Unit: ${s.unit}`),s.unitStat&&u.push(`stat: ${s.unitStat}`)),u.join(", ")},a=()=>i().flavorText||i().prerequisites.length>0;return m(C,{get when(){return n.computeVisibility(i().id)},get children(){var s=Bn(),u=s.firstChild,f=u.firstChild,c=f.firstChild,y=c.firstChild;return c.nextSibling,u.$$click=()=>n.doAction(i()),g(y,()=>i().name),g(c,m(C,{get when(){return a()},get children(){var h=Rn();return h.$$click=b=>{b.stopPropagation(),o(!r())},g(h,()=>r()?"▼":"▶"),T(()=>v(h,B.toggleButton)),h}}),null),g(f,()=>i().description,null),g(f,m(C,{get when(){return r()},get children(){var h=Fn();return g(h,m(C,{get when(){return i().flavorText},get children(){var b=Vn();return g(b,()=>i().flavorText),T(()=>v(b,B.flavorText)),b}}),null),g(h,m(C,{get when(){return i().prerequisites.length>0},get children(){var b=Gn(),x=b.firstChild,S=x.nextSibling;return g(S,m(Me,{get each(){return i().prerequisites},children:D=>(()=>{var E=Yn();return g(E,()=>l(D)),E})()})),T(()=>v(b,B.prerequisites)),b}}),null),T(()=>v(h,B.expandedDetails)),h}}),null),T(h=>{var b=B.actionContainer,x=B.action,S=!n.computeEnabled(i().id),D=B.actionContent,E=B.actionHeader;return b!==h.e&&v(s,h.e=b),x!==h.t&&v(u,h.t=x),S!==h.a&&(u.disabled=h.a=S),D!==h.o&&v(f,h.o=D),E!==h.i&&v(c,h.i=E),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s}})};$e(["click"]);const Kn="_encounter_jz6zl_1",Xn={encounter:Kn},Wn="_progressBar_dmti8_33",Jn="_barText_dmti8_46",Zn="_progressFill_dmti8_65",Qn="_healthFill_dmti8_70",qn="_health_dmti8_70",ei="_mana_dmti8_79",ti="_delay_dmti8_84",ie={progressBar:Wn,barText:Jn,progressFill:Zn,healthFill:Qn,health:qn,mana:ei,delay:ti};var ni=p("<div><div></div><div>");const Z=e=>{const t=()=>e.max>0?e.value/e.max:0,n=()=>e.easing??1,i=()=>Math.pow(t(),n())*100;return(()=>{var r=ni(),o=r.firstChild,l=o.nextSibling;return g(l,()=>e.label),T(a=>{var s=ie.progressBar,u=`${ie.progressFill} ${ie[e.type]} ${e.isHealth?ie.healthFill:""}`,f=`${i()}%`,c=ie.barText;return s!==a.e&&v(r,a.e=s),u!==a.t&&v(o,a.t=u),f!==a.a&&Ct(o,"width",a.a=f),c!==a.o&&v(l,a.o=c),a},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};var ii=p('<div style="border:1px solid black;width:360px;margin:0 auto">'),ri=p("<div>No encounter active."),oi=p("<div><b>Encounter"),ai=p("<div style=text-align:right><div><b>"),li=p("<div style=text-align:left><div><b>");const si=()=>{const[e]=ne(),t=k(()=>Object.entries(e.encounter?.allies??{}));return(()=>{var n=oi();return n.firstChild,g(n,m(C,{get when(){return e.encounter!==null},get children(){var i=ii();return g(i,m(Me,{get each(){return e.encounter?.enemies},children:r=>(()=>{var o=ai(),l=o.firstChild,a=l.firstChild;return g(a,()=>r.enemyID),g(o,m(Z,{get value(){return r.health.value},get max(){return r.health.max},get label(){return`HP: ${w(r.health.value)} / ${w(r.health.max)}`},type:"health",easing:.7,isHealth:!0}),null),g(o,m(C,{get when(){return(r.mana.max??0)>0},get children(){return m(Z,{get value(){return r.mana.value},get max(){return r.mana.max},get label(){return`MP: ${w(r.mana.value)} / ${w(r.mana.max)}`},type:"mana"})}}),null),g(o,m(Z,{get value(){return r.delay},get max(){return z(()=>!!r.skillID)()?H[r.skillID].delay:0},get label(){return z(()=>!!r.skillID)()?`${H[r.skillID].name}: ${w(r.delay)} / ${w(H[r.skillID].delay)}`:"Wait"},type:"delay"}),null),o})()}),null),g(i,m(Me,{get each(){return t()},children:([r,o])=>{const l=e.party[r];return(()=>{var a=li(),s=a.firstChild,u=s.firstChild;return g(u,()=>l.name),g(a,m(Z,{get value(){return l.health.value},get max(){return l.health.max},get label(){return`HP: ${w(l.health.value)} / ${w(l.health.max)}`},type:"health",easing:.7,isHealth:!0}),null),g(a,m(C,{get when(){return(l.mana.max??0)>0},get children(){return m(Z,{get value(){return l.mana.value},get max(){return l.mana.max},get label(){return`MP: ${w(l.mana.value)} / ${w(l.mana.max)}`},type:"mana"})}}),null),g(a,m(Z,{get value(){return o.delay},get max(){return z(()=>!!o.skillID)()?H[o.skillID].delay:0},get label(){return z(()=>!!o.skillID)()?`${H[o.skillID].name}: ${w(o.delay)} / ${w(H[o.skillID].delay)}`:"Wait"},type:"delay"}),null),a})()}}),null),i}}),null),g(n,m(C,{get when(){return e.encounter===null},get children(){return ri()}}),null),T(()=>v(n,Xn.encounter)),n})()};var ui=p("<div><b>Inventory"),ci=p("<div>");const fi=()=>{const[e]=ne(),t=k(()=>Object.entries(e.items));return(()=>{var n=ui();return n.firstChild,g(n,m(Ee,{get each(){return t()},children:(i,r)=>(()=>{var o=ci();return g(o,()=>i()[1].amount+" "+i()[1].id),o})()}),null),n})()},di="_log_content_1fyxs_1",hi={log_content:di};var Ke=p("<div>");const mi=()=>{const[e]=ne(),t=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(()=>{var n=Ke();return g(n,m(Ee,{get each(){return e.logs},children:(i,r)=>(()=>{var o=Ke();return g(o,()=>"["+t.format(Date.now())+"] "+i()),o})()})),T(()=>v(n,hi.log_content)),n})()};var gi=p('<div style=display:flex;align-items:center;gap:8px;font-size:14px><label for=theme-select>Theme:</label><select id=theme-select style="padding:2px 4px;border-radius:4px;border:1px solid var(--border-color);background:var(--section-bg);color:var(--text-color);cursor:pointer"><option value=system>System</option><option value=light>Light</option><option value=dark>Dark');const yi=()=>{const[e,t]=ne();return(()=>{var n=gi(),i=n.firstChild,r=i.nextSibling;return r.$$input=o=>t.setTheme(o.currentTarget.value),T(()=>r.value=e.theme),n})()};$e(["input"]);var vi=p('<div style=display:flex;flex-direction:column;gap:20px><h3>Configuration</h3><section style="display:flex;flex-direction:column;gap:10px;padding:15px;border:1px solid var(--border-color);background:var(--section-bg);border-radius:8px"><h4 style=margin:0>Appearance');const bi=()=>(()=>{var e=vi(),t=e.firstChild,n=t.nextSibling;return n.firstChild,g(n,m(yi,{}),null),e})(),_i="_landing_g7s4w_1",pi="_content_g7s4w_48",xi="_title_g7s4w_68",Ei="_description_g7s4w_103",$i="_subdescription_g7s4w_115",wi="_startButton_g7s4w_127",Ii="_buttonText_g7s4w_155",Si="_buttonGlow_g7s4w_160",Y={landing:_i,content:pi,title:xi,description:Ei,subdescription:$i,startButton:wi,buttonText:Ii,buttonGlow:Si};var Ai=p("<div><div><h1>Yet Another Regressor Idle</h1><p>This is a vibe-coded idle/incremental game that attempts to capture the feeling of being the main character of a regression manhwa, with <i>Leveling with the Gods</i> and <i>Max Level Player's 100th Regression</i> as the main sources of inspiration.</p><p>TODO:<br>* No saving/persistence.</p><button><span>Start Game</span><span>");const Di=e=>(()=>{var t=Ai(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=r.nextSibling,l=o.nextSibling,a=l.firstChild,s=a.nextSibling;return Ot(l,"click",e.onStartGame),T(u=>{var f=Y.landing,c=Y.content,y=Y.title,h=Y.description,b=Y.subdescription,x=Y.startButton,S=Y.buttonText,D=Y.buttonGlow;return f!==u.e&&v(t,u.e=f),c!==u.t&&v(n,u.t=c),y!==u.a&&v(i,u.a=y),h!==u.o&&v(r,u.o=h),b!==u.i&&v(o,u.i=b),x!==u.n&&v(l,u.n=x),S!==u.s&&v(a,u.s=S),D!==u.h&&v(s,u.h=D),u},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),t})();$e(["click"]);var Se=p("<div>"),Ti=p("<div>Health <!> / "),Mi=p("<div>Mana <!> / "),Oi=p("<div><header><span>Yet Another Regressor Idle</span></header><nav><button>Actions</button><button>Encounter</button><button>Inventory</button><button>Config</button></nav><div><div></div><aside><b>Resources</b><br><b>Stats"),Ci=p("<span>");const ki=()=>{const[e,t]=ne(),[n,i]=W(null),[r,o]=W(null),l=f=>{console.log("Switching tab");const c=e.tabs.indexOf(e.activeTab);f==="right"&&c>0?t.setActiveTab(e.tabs[c-1]):f==="left"&&c<e.tabs.length-1&&t.setActiveTab(e.tabs[c+1])},a=f=>{i(f.touches[0].clientX),o(f.touches[0].clientY)},s=f=>{const c=n(),y=r();if(c===null||y===null)return;const h=f.changedTouches[0].clientX,b=f.changedTouches[0].clientY,x=h-c,S=b-y;Math.abs(x)>Math.abs(S)&&Math.abs(x)>50&&(x>0?l("right"):l("left")),i(null),o(null)};Je(()=>{let f="dark";e.theme==="system"?f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":f=e.theme,document.documentElement.setAttribute("data-theme",f)}),bt(()=>{t.initialize(t);let f=Date.now()/1e3;const c=setInterval(()=>{let y=Date.now()/1e3;const h=y-f;f=y,t.runEncounter(h)},50);ke(()=>clearInterval(c))});const u=k(()=>Object.entries(e.resources));return(()=>{var f=Oi(),c=f.firstChild,y=c.nextSibling,h=y.firstChild,b=h.nextSibling,x=b.nextSibling,S=x.nextSibling,D=y.nextSibling,E=D.firstChild,A=E.nextSibling,N=A.firstChild,R=N.nextSibling;return R.nextSibling,h.$$click=()=>t.setActiveTab("actions"),b.$$click=()=>t.setActiveTab("encounter"),x.$$click=()=>t.setActiveTab("inventory"),S.$$click=()=>t.setActiveTab("config"),E.$$touchend=s,E.$$touchstart=a,g(E,m(Dt,{get children(){return[m(ue,{get when(){return e.activeTab==="actions"},get children(){return m(Hn,{})}}),m(ue,{get when(){return e.activeTab==="encounter"},get children(){return m(si,{})}}),m(ue,{get when(){return e.activeTab==="inventory"},get children(){return m(fi,{})}}),m(ue,{get when(){return e.activeTab==="config"},get children(){return m(bi,{})}})]}})),g(D,m(C,{get when(){return e.activeTab==="actions"||e.activeTab==="encounter"},get children(){var d=Se();return g(d,m(mi,{})),T(()=>v(d,O.logs)),d}}),A),g(A,m(Ee,{get each(){return u()},children:d=>(()=>{var j=Ci();return g(j,m(C,{get when(){return z(()=>!!(U[d()[0]].type==="basic"&&t.computeVisibility(d()[0])))()&&d()[1].max!==-1},get children(){var P=Se();return g(P,()=>U[d()[0]].name+" "+w(d()[1].value,U[d()[0]].wholeNumbers)+" / "+w(d()[1].max,U[d()[0]].wholeNumbers)),P}}),null),g(j,m(C,{get when(){return z(()=>!!(U[d()[0]].type==="basic"&&t.computeVisibility(d()[0])))()&&d()[1].max===-1},get children(){var P=Se();return g(P,()=>U[d()[0]].name+" "+w(d()[1].value,U[d()[0]].wholeNumbers)),P}}),null),j})()}),R),g(A,m(C,{get when(){return z(()=>!!e.party[I])()&&(e.party[I].health.max??0)>0},get children(){var d=Ti(),j=d.firstChild,P=j.nextSibling;return P.nextSibling,g(d,()=>w(e.party[I].health.value,!1),P),g(d,()=>w(e.party[I].health.max,!1),null),d}}),null),g(A,m(C,{get when(){return z(()=>!!e.party[I])()&&(e.party[I].mana.max??0)>0},get children(){var d=Mi(),j=d.firstChild,P=j.nextSibling;return P.nextSibling,g(d,()=>w(e.party[I].mana.value,!1),P),g(d,()=>w(e.party[I].mana.max,!1),null),d}}),null),T(d=>{var j=O.App,P=O.header,je=O.tab_nav,Ue=`${O.tab_button} ${e.activeTab==="actions"?O.tab_active:""} `,Re=`${O.tab_button} ${e.activeTab==="encounter"?O.tab_active:""} `,Ve=`${O.tab_button} ${e.activeTab==="inventory"?O.tab_active:""} `,Ge=`${O.tab_button} ${e.activeTab==="config"?O.tab_active:""} `,Fe=O.main_container,Be=O.tab_content,Ye=O.stats;return j!==d.e&&v(f,d.e=j),P!==d.t&&v(c,d.t=P),je!==d.a&&v(y,d.a=je),Ue!==d.o&&v(h,d.o=Ue),Re!==d.i&&v(b,d.i=Re),Ve!==d.n&&v(x,d.n=Ve),Ge!==d.s&&v(S,d.s=Ge),Fe!==d.h&&v(D,d.h=Fe),Be!==d.r&&v(E,d.r=Be),Ye!==d.d&&v(A,d.d=Ye),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),f})()},Pi=()=>{const[e,t]=W(!1),n=()=>{t(!0)};return m(C,{get when(){return e()},get fallback(){return m(Di,{onStartGame:n})},get children(){return m(ki,{})}})};$e(["click","touchstart","touchend"]);const Ni=document.getElementById("root");Mt(()=>m(Tn,{get children(){return m(Pi,{})}}),Ni);
